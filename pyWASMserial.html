<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>WebSerial Demo</title>
    <script defer src="https://pyscript.net/releases/2022.12.1/pyscript.js"></script>
    <link rel="stylesheet" href="https://pyscript.net/releases/2022.12.1/pyscript.css">
     <h3>Input:</h3>
 <input type="text" id="textinp1">
 <button py-click="su()" id="open">Scrape YT</button>
         
    <h3>Output:</h3>
    <div id="textout1"></div>
    <py-config>
        packages = ["pandas", "numpy", "requests","bs4","time"]
    </py-config>
    <py-script>
            import pandas as pd
            import numpy as np
            import requests
            from bs4 import BeautifulSoup
            from time import sleep
            
            
            def get_table(round, url=url):
                round_url = f'{url}/{round}'
                page = requests.get(round_url)
                soup = BeautifulSoup(page.text, 'html.parser')
                
                rows = []
                for child in soup.find_all('table')[4].children:
                    row = []
                    for td in child:
                        try:
                            row.append(td.text.replace('\n', ''))
                        except:
                            continue
                    if len(row) > 0:
                        rows.append(row)
            
                df = pd.DataFrame(rows[1:], columns=rows[0])
                return df
                
            
            for round in range(1, 39):
                table = get_table(round)
                table.to_csv(f'PL_table_matchweek_{round}.csv', index=False)
                sleep(np.random.randint(1, 10))
            display (results+info,target="textout1")        
    </py-script>
</head>
<body>

</body>
</html>
